server {
    server_name localhost;
    listen 80;

    root /usr/share/nginx/html;  # Dossier où est placé le build de Nuxt
    index index.html;

    location / {
        try_files $uri /index.html;
    }

    location /_nuxt/ {
        proxy_pass http://localhost:3000;  # Port où tourne l'application Nuxt
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
# 
# 
# server {
#     server_name *;
#     listen 80;
#     listen [::]:80;
# 
#     location / {
#         proxy_set_header  X-Remote-Address $remote_addr;
#         proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_pass http://localhost:3000;
#         proxy_redirect default;
#     }
# }
# 
# server {
#     server_name participation-citoyenne.fr www.participation-citoyenne.fr;
#     listen <%= ENV['PORT'] %>;
#     
#     location / {
#       return 301 https://agora.gouv.fr/participation-citoyenne;
#     }
# }